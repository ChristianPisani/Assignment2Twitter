extends layout

block content
    h1= title
    form#submitform(method='get', action='javascript:sendKeyWords()')
            span.label Keywords
            input(type='text', id='keywords')
            input(type='submit')

    div#keywordsSplit

    script.
        function sendKeyWords() {
            let form = $('#submitform');
            let query = form.serialize();

            //Replace spaces with commas and remove dangerous symbols
            let keywords = $('#keywords').val().replace(/\s+/g, ",");
            keywords = encodeURIComponent(keywords.replace(/(["Â´`'])/g, ''));

            $.post(`/trackstreams`, {keywords: keywords}, function (res) {
                window.location = `/visualization?keywords=${keywords}`;
            });
        }
